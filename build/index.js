(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,r=window.wp.element,n=window.wp.components,o=window.wp.blockEditor,a=window.wp.apiFetch;var c=e.n(a);const s=window.wp.data,p=window.ReactJSXRuntime;(0,t.registerBlockType)("pattern-pal/pattern-generator",{edit:function({attributes:e,setAttributes:t,clientId:a}){const[i,l]=(0,r.useState)(!1),d=(0,o.useBlockProps)();return(0,p.jsxs)("div",{...d,children:[(0,p.jsx)(n.TextControl,{label:"Describe your block pattern",value:e.prompt,onChange:e=>t({prompt:e})}),(0,p.jsx)(n.Button,{onClick:function(){l(!0),c()({url:patternpalNonce.ajaxurl,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"pattern_pal_generate_pattern",security:patternpalNonce.nonce,prompt:e.prompt})}).then((e=>{l(!1),e.success?function(e){const{removeBlock:t,insertBlocks:r}=(0,s.dispatch)("core/block-editor");t(a),r(wp.blocks.parse(e))}(e.data.pattern):alert("Error: "+e.data.message)})).catch((e=>{l(!1),console.error("AJAX Error:",e),alert("AJAX Request Failed")}))},disabled:i,children:i?"Generating...":"Generate"})]})},save:function({attributes:e}){return(0,p.jsx)("div",{...o.useBlockProps.save(),dangerouslySetInnerHTML:{__html:e.generatedPattern}})}})})();